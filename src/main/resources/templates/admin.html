<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Página Admin</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #333;
            color: #ccc;
            padding: 20px 0;
            text-align: center;
            position: relative;
        }
        .container {
            width: 80%;
            margin: 30px auto;
            overflow: hidden;
        }
        h1 {
            text-align: center;
            color: #ccc;
            margin-bottom: 40px;
        }
        h3 {
            color: #666;
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
            cursor: pointer;
        }
        .register-button {
            color: #666;
            font-size: 12px;
            float: right;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        ul li {
            background: #fff;
            margin: 10px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .button-group {
            display: flex;
            gap: 10px; /* space between buttons */
            margin-left: auto; /* align buttons to the right */
        }
        .remove-button, .edit-button, .ver-curso-button, .addAluno-button, .addProf-button {
            background-color: #ccc;
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .remove-button:hover, .edit-button:hover, .ver-curso-button:hover, .addAluno-button:hover, .addProf-button:hover {
            background-color: #999;
        }

    </style>
    <script>
        function toggleUserList() {
            var userList = document.getElementById("userList");
            if (userList.style.display === "none") {
                userList.style.display = "block";
            } else {
                userList.style.display = "none";
            }
        }

        function toggleCourseList() {
            var courseList = document.getElementById("courseList");
            if (courseList.style.display === "none") {
                courseList.style.display = "block";
            } else {
                courseList.style.display = "none";
            }
        }

        function toggleDisciplineList() {
            var disciplineList = document.getElementById("disciplineList");
            if (disciplineList.style.display === "none") {
                disciplineList.style.display = "block";
            } else {
                disciplineList.style.display = "none";
            }
        }
        
        function editUser(form, userId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "id";
            idField.value = userId;
            form.appendChild(idField);

            var name = prompt("Enter name:") || "";
            var age = prompt("Enter age:");
            age = (age && !isNaN(age)) ? age : 0;
            var userType = prompt("Enter user type:") || "";
            var email = prompt("Enter email:") || "";
            var password = prompt("Enter password:") || "";

            var nameField = document.createElement("input");
            nameField.type = "hidden";
            nameField.name = "name";
            nameField.value = name;
            form.appendChild(nameField);

            var ageField = document.createElement("input");
            ageField.type = "hidden";
            ageField.name = "age";
            ageField.value = age;
            form.appendChild(ageField);

            var userTypeField = document.createElement("input");
            userTypeField.type = "hidden";
            userTypeField.name = "userType";
            userTypeField.value = userType;
            form.appendChild(userTypeField);

            var emailField = document.createElement("input");
            emailField.type = "hidden";
            emailField.name = "email";
            emailField.value = email;
            form.appendChild(emailField);

            var passwordField = document.createElement("input");
            passwordField.type = "hidden";
            passwordField.name = "password";
            passwordField.value = password;
            form.appendChild(passwordField);

            form.submit();
        }

        function editDiscipline(form, disciplineId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "id";
            idField.value = disciplineId;
            form.appendChild(idField);

            var name = prompt("Enter name:") || "";
            var description = prompt("Enter description:") || "";
            var schedule = prompt("Enter schedule:") || "";

            var nameField = document.createElement("input");
            nameField.type = "hidden";
            nameField.name = "name";
            nameField.value = name;
            form.appendChild(nameField);

            var descriptionField = document.createElement("input");
            descriptionField.type = "hidden";
            descriptionField.name = "description";
            descriptionField.value = description;
            form.appendChild(descriptionField);

            var scheduleField = document.createElement("input");
            scheduleField.type = "hidden";
            scheduleField.name = "schedule";
            scheduleField.value = schedule;
            form.appendChild(scheduleField);

            form.submit();
        }

        
        function toggleUserList() {
            var userList = document.getElementById("userList");
            if (userList.style.display === "none") {
                userList.style.display = "block";
            } else {
                userList.style.display = "none";
            }
        }

        function toggleCourseList() {
            var courseList = document.getElementById("courseList");
            if (courseList.style.display === "none") {
                courseList.style.display = "block";
            } else {
                courseList.style.display = "none";
            }
        }

        function toggleDisciplineList() {
            var disciplineList = document.getElementById("disciplineList");
            if (disciplineList.style.display === "none") {
                disciplineList.style.display = "block";
            } else {
                disciplineList.style.display = "none";
            }
        }

        function editUser(form, userId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "id";
            idField.value = userId;
            form.appendChild(idField);

            var name = prompt("Enter name:") || "";
            var age = prompt("Enter age:");
            age = (age && !isNaN(age)) ? age : 0;
            var userType = prompt("Enter user type:") || "";
            var email = prompt("Enter email:") || "";
            var password = prompt("Enter password:") || "";

            var nameField = document.createElement("input");
            nameField.type = "hidden";
            nameField.name = "name";
            nameField.value = name;
            form.appendChild(nameField);

            var ageField = document.createElement("input");
            ageField.type = "hidden";
            ageField.name = "age";
            ageField.value = age;
            form.appendChild(ageField);

            var userTypeField = document.createElement("input");
            userTypeField.type = "hidden";
            userTypeField.name = "userType";
            userTypeField.value = userType;
            form.appendChild(userTypeField);

            var emailField = document.createElement("input");
            emailField.type = "hidden";
            emailField.name = "email";
            emailField.value = email;
            form.appendChild(emailField);

            var passwordField = document.createElement("input");
            passwordField.type = "hidden";
            passwordField.name = "password";
            passwordField.value = password;
            form.appendChild(passwordField);

            form.submit();
        }

        function editDiscipline(form, disciplineId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "id";
            idField.value = disciplineId;
            form.appendChild(idField);

            var name = prompt("Enter name:") || "";
            var description = prompt("Enter description:") || "";
            var schedule = prompt("Enter schedule:") || "";

            var nameField = document.createElement("input");
            nameField.type = "hidden";
            nameField.name = "name";
            nameField.value = name;
            form.appendChild(nameField);

            var descriptionField = document.createElement("input");
            descriptionField.type = "hidden";
            descriptionField.name = "description";
            descriptionField.value = description;
            form.appendChild(descriptionField);

            var scheduleField = document.createElement("input");
            scheduleField.type = "hidden";
            scheduleField.name = "schedule";
            scheduleField.value = schedule;
            form.appendChild(scheduleField);

            form.submit();
        }

        function editCourse(form, courseId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "id";
            idField.value = courseId;
            form.appendChild(idField);

            var name = prompt("Enter name:") || "";
            var description = prompt("Enter description:") || "";
            var price = prompt("Enter price:");
            price = (price && !isNaN(price)) ? parseFloat(price) : 0;
            var duration = prompt("Enter duration:");
            duration = (duration && !isNaN(duration)) ? parseInt(duration) : 0;
            var normalTime = prompt("Enter normal time:");
            normalTime = (normalTime && !isNaN(normalTime)) ? parseInt(normalTime) : 0;

            var nameField = document.createElement("input");
            nameField.type = "hidden";
            nameField.name = "name";
            nameField.value = name;
            form.appendChild(nameField);

            var descriptionField = document.createElement("input");
            descriptionField.type = "hidden";
            descriptionField.name = "description";
            descriptionField.value = description;
            form.appendChild(descriptionField);

            var priceField = document.createElement("input");
            priceField.type = "hidden";
            priceField.name = "price";
            priceField.value = price;
            form.appendChild(priceField);

            var durationField = document.createElement("input");
            durationField.type = "hidden";
            durationField.name = "duration";
            durationField.value = duration;
            form.appendChild(durationField);

            var normalTimeField = document.createElement("input");
            normalTimeField.type = "hidden";
            normalTimeField.name = "normalTime";
            normalTimeField.value = normalTime;
            form.appendChild(normalTimeField);

            form.submit();
        }

        //deve pedir através de um prompt o id do aluno e adicionar ao curso
        //addAlunoToCourse(courseID)
        function addAlunoToCourse(form, courseId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "courseId";
            idField.value = courseId;
            form.appendChild(idField);

            var alunoId = prompt("Enter aluno id:");
            alunoId = (alunoId && !isNaN(alunoId)) ? parseInt(alunoId) : 0;

            var alunoIdField = document.createElement("input");
            alunoIdField.type = "hidden";
            alunoIdField.name = "studentId";
            alunoIdField.value = alunoId;
            form.appendChild(alunoIdField);

            form.submit();
        }

        //deve pedir através de um prompt o id da disciplina e adicionar ao curso
        function addDisciplineToCourse(form, courseId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "courseId";
            idField.value = courseId;
            form.appendChild(idField);

            var disciplineId = prompt("Enter discipline id:");
            disciplineId = (disciplineId && !isNaN(disciplineId)) ? parseInt(disciplineId) : 0;

            var disciplineIdField = document.createElement("input");
            disciplineIdField.type = "hidden";
            disciplineIdField.name = "disciplineId";
            disciplineIdField.value = disciplineId;
            form.appendChild(disciplineIdField);

            form.submit();
        }

        //deve pedir através de um prompt o id do professor e adicionar à disciplina
        //addProfToDiscipline(disciplineID)
        function addProfToDiscipline(form, disciplineId) {
            var idField = document.createElement("input");
            idField.type = "hidden";
            idField.name = "disciplineId";
            idField.value = disciplineId;
            form.appendChild(idField);

            var profId = prompt("Enter professor id:");
            profId = (profId && !isNaN(profId)) ? parseInt(profId) : 0;

            var profIdField = document.createElement("input");
            profIdField.type = "hidden";
            profIdField.name = "professorId";
            profIdField.value = profId;
            form.appendChild(profIdField);

            form.submit();
        }

        function toggleAdminList() {
            var adminList = document.getElementById("adminList");
            if (adminList.style.display === "none") {
                adminList.style.display = "block";
            } else {
                adminList.style.display = "none";
            }
        }

        function toggleProfessorList() {
            var professorList = document.getElementById("professorList");
            if (professorList.style.display === "none") {
                professorList.style.display = "block";
            } else {
                professorList.style.display = "none";
            }
        }

        function toggleAlunoList() {
            var alunoList = document.getElementById("alunoList");
            if (alunoList.style.display === "none") {
                alunoList.style.display = "block";
            } else {
                alunoList.style.display = "none";
            }
        }


    </script>
</head>
<body>
    <header>
        <h1>Página Admin</h1>
    </header>
    <div class="container" id="content">

        <!-- LISTAR USERS (ADMINS PROFESSORES E ALUNOS) -->
<!--         <h3 onclick="toggleUserList()">Utilizadores <a href="/register" class="register-button">Adicionar Utilizador</a></h3>
        <div id="userList">
            <ul>
                <li th:each="user : ${users}">
                    <span th:text="${user}"></span>
                    <div class="button-group">
                        <form th:action="@{/editUser}" method="post" id="editForm">
                            <input type="hidden" th:value="${user.id}" name="id"/>
                            <button class="edit-button" type="submit" onclick="editUser(this.parentElement, this.getAttribute('data-id'))" data-id="${user.id}">✏️</button>   
                        </form>
                        <form th:action="@{/deleteUser}" method="post">
                            <input type="hidden" th:value="${user.id}" name="id"/>
                            <button class="remove-button" type="submit">❌</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div> -->

        <!-- LISTAR USER COM USERTYPE=='ADMIN' -->
        <h3 onclick="toggleAdminList()">Administradores <a href="/register" class="register-button">Adicionar Administrador</a></h3>
        <div id="adminList">
            <ul>
                <li th:each="admin : ${admins}">
                    <span th:text="${admin}"></span>
                    <div class="button-group">
                        <form th:action="@{/editUser}" method="post">
                            <input type="hidden" th:value="${admin.id}" name="id"/>
                            <button class="edit-button" type="submit" onclick="editUser(this.parentElement, this.getAttribute('data-id'))" data-id="${admin.id}">✏️</button>
                        </form>
                        <form th:action="@{/deleteUser}" method="post">
                            <input type="hidden" th:value="${admin.id}" name="id"/>
                            <button class="remove-button" type="submit">❌</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>

        <!-- LISTAR PROFESSORS -->
        <h3 onclick="toggleProfessorList()">Professores <a href="/register" class="register-button">Adicionar Professor</a></h3>
        <div id="professorList">
            <ul>
                <li th:each="userProfessor : ${usersProfessors}">
                    <span th:text="${userProfessor}"></span>
                    <div class="button-group">
                        <form th:action="@{/editUser}" method="post">
                            <input type="hidden" th:value="${userProfessor.id}" name="id"/>
                            <button class="edit-button" type="submit" onclick="editUser(this.parentElement, this.getAttribute('data-id'))" data-id="${userProfessor.id}">✏️</button>
                        </form>
                        <form th:action="@{/deleteUser}" method="post">
                            <input type="hidden" th:value="${userProfessor.id}" name="id"/>
                            <button class="remove-button" type="submit">❌</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>

        <!-- LISTAR ALUNOS -->
        <h3 onclick="toggleAlunoList()">Alunos <a href="/register" class="register-button">Adicionar Aluno</a></h3>
        <div id="alunoList">
            <ul>
                <li th:each="userAluno : ${usersAlunos}">
                    <span th:text="${userAluno}"></span>
                    <div class="button-group">
                        <form th:action="@{/editUser}" method="post">
                            <input type="hidden" th:value="${userAluno.id}" name="id"/>
                            <button class="edit-button" type="submit" onclick="editUser(this.parentElement, this.getAttribute('data-id'))" data-id="${userAluno.id}">✏️</button>
                        </form>
                        <form th:action="@{/deleteUser}" method="post">
                            <input type="hidden" th:value="${userAluno.id}" name="id"/>
                            <button class="remove-button" type="submit">❌</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>

        <!-- LISTAR DISCIPLINAS -->
        <h3 onclick="toggleDisciplineList()">Disciplinas <a href="/registerDiscipline" class="register-button">Adicionar Disciplina</a></h3>
        <div id="disciplineList">
            <ul>
                <li th:each="discipline : ${disciplines}">
                    <span th:text="${discipline}"></span>
                    <div class="button-group">
<!--                         <form th:action="@{/addProfToDiscipline}" method="post" id="addProfToDiscipline">
                            <input type="hidden" th:value="${discipline.id}" name="disciplineId"/>
                            <button class="addProf-button" type="submit" onclick="addAlunoToCourse(this.parentElement, this.getAttribute('data-id'))" data-id="${discipline.id}">+ Professor</button>
                        </form>    --> 
                        <form th:action="@{/editDiscipline}" method="post" id="editDisciplineForm">
                            <input type="hidden" th:value="${discipline.id}" name="id"/>
                            <button class="edit-button" type="submit" onclick="editDiscipline(this.parentElement, this.getAttribute('data-id'))" data-id="${discipline.id}">✏️</button>
                        </form>
                        <form th:action="@{/deleteDiscipline}" method="post">
                            <input type="hidden" th:value="${discipline.id}" name="id"/>
                            <button class="remove-button" type="submit">❌</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>

        <!-- LISTAR CURSOS -->
        <h3 onclick="toggleCourseList()">Cursos <a href="/registerCourse" class="register-button">Adicionar Curso</a></h3>
        <div id="courseList">
            <ul>
                <li th:each="course : ${courses}">
                    <span th:text="${course}"></span>
                    <div class="button-group">

                <form th:action="@{/courseDetails}" method="post">
                    <input type="hidden" th:value="${course.id}" name="courseId"/>
                    <button class="ver-curso-button" type="submit" onclick="courseDetails(this.parentElement, this.getAttribute(data-id))">Ver</button>
                </form>
                
                        <form th:action="@{/addAlunoToCourse}" method="post" id="addAlunoToCourseForm">
                            <input type="hidden" th:value="${course.id}" name="courseId"/>
                            <button class="addAluno-button" type="submit" onclick="addAlunoToCourse(this.parentElement, this.getAttribute('data-id'))" data-id="${course.id}">+ Aluno</button>
                        </form>         
                        <!-- form para adicionar disiciplina a curso -->
                        <form th:action="@{/addDisciplineToCourse}" method="post" id="addDisciplineToCourseForm">
                            <input type="hidden" th:value="${course.id}" name="courseId"/>
                            <button class="addProf-button" type="submit" onclick="addDisciplineToCourse(this.parentElement, this.getAttribute('data-id'))" data-id="${course.id}">+ Disciplina</button>
                        </form>               
                        <form th:action="@{/editCourse}" method="post" id="editCourseForm">
                            <input type="hidden" th:value="${course.id}" name="id"/>
                            <button class="edit-button" type="submit" onclick="editCourse(this.parentElement, this.getAttribute('data-id'))" data-id="${course.id}">✏️</button>
                        </form>
                        <form th:action="@{/deleteCourse}" method="post">
                            <input type="hidden" th:value="${course.id}" name="id"/>
                            <button class="remove-button" type="submit">❌</button>
                        </form>

                    </div>
                </li>
            </ul>
        </div>

    </div>
</body>
</html>